# 개선된 원고 생성 시스템

## 📋 개요

기존 방식의 문제점을 해결한 새로운 원고 생성 시스템입니다.

### 기존 방식의 문제점
- 10개의 원고를 만들려면 "시작" 버튼을 10번 눌러야 함
- 중복 검사를 위해 별도의 서버(web/server.js)를 사용해야 함
- 수동으로 파일을 복사하여 중복 검사 진행
- 피드백을 반영하기 어려움

### 새로운 시스템의 장점
✅ **하나씩 확인하며 생성**: 각 원고를 확인하고 다음 생성  
✅ **자동 중복 방지**: AI가 이전 원고와 겹치지 않게 자동 생성  
✅ **피드백 반영**: 원하는 스타일로 즉시 조정 가능  
✅ **클립보드 복사**: 원고를 바로 복사하여 사용  
✅ **특수문자 자동 제거**: ', ", **, ` 자동 제거  

---

## 🚀 사용 방법

### 1. 서버 실행
```bash
cd create-anthropic
npm run dev
```

### 2. 브라우저에서 접속
```
http://localhost:3000/new
```

### 3. 원고 생성
1. **메인 키워드** 입력 (예: 갈비 창업 브랜드)
2. **🚀 시작** 버튼 클릭
3. 첫 번째 원고 생성 완료
4. 원고 확인 후 만족하면 다음 단계로

### 4. 추가 원고 생성
1. (선택) **피드백** 입력 (예: "더 친근한 말투로", "사례를 더 강조해줘")
2. **➡️ 다음 원고 생성** 버튼 클릭
3. 이전 원고와 겹치지 않는 새 원고 생성
4. 필요한 만큼 반복

### 5. 원고 활용
- **📋 복사**: 클립보드에 복사하여 바로 사용
- **💾 다운로드**: 개별 원고를 txt 파일로 다운로드
- **📥 전체 다운로드**: 모든 원고를 한 번에 다운로드

---

## 🎯 주요 기능 상세

### 1. 하나씩 확인하며 생성

**작동 원리:**
- "시작" 버튼으로 첫 원고 생성
- 원고를 확인하고 만족하면 "다음" 버튼
- 각 원고마다 이전 원고들과 비교하여 중복 방지
- 필요한 만큼 계속 생성 가능

### 2. 피드백 반영 시스템

**피드백 예시:**
- "더 친근한 말투로 작성해줘"
- "성공사례를 더 강조해줘"
- "간결하게 작성해줘"
- "구체적인 숫자를 더 많이 넣어줘"

### 3. 자동 중복 방지

**중복 방지 예시:**
```
원고 1: "누룩으로 7일간 숙성해서 고기의 품질을 높입니다."
원고 2: "일주일 동안 누룩 숙성 과정을 거쳐 육질이 더 좋아져요."
원고 3: "7일 이상의 누룩 숙성으로 맛이 한층 업그레이드됩니다."
```

### 2. 표현 다양화 전략

**숫자는 그대로 유지:**
- ✅ "4억 5천만원" → "4억 5천만원" (변경 안 함)
- ✅ "20개 테이블" → "20개 테이블" (변경 안 함)

**표현만 다양화:**
- "매출이 좋습니다" → "수익이 훌륭해요" → "장사가 잘 돼요"
- "맛있는 고기" → "품질 좋은 육류" → "퀄리티 높은 고깃집"

### 3. 클립보드 복사 기능
- 원고를 선택하고 "📋 복사" 버튼 클릭
- 바로 블로그, 문서에 붙여넣기 가능
- 복사 성공 시 알림 표시

### 4. 일괄 다운로드
- "📥 전체 다운로드" 버튼으로 모든 원고를 txt 파일로 저장
- 파일명: `원고_1.txt`, `원고_2.txt`, ...

---

## ⚙️ 설정 변경

`create-anthropic/src/app/lib/constants.js` 파일에서 기본 설정을 변경할 수 있습니다:

```javascript
export const MARKET_NAME = '담가화로구이'; // 업체명
export const KEYWORD_COUNT = 8; // 키워드 사용 횟수
export const MIN_LENGTH = 2400; // 최소 글자 수
export const IMAGE_COUNT = 20; // 단락 수
export const CONTENT_TYPE = '정보전달 및 후기성 원고'; // 글 스타일
```

---

## 📝 작성 규칙 (프롬프트 기반)

### 형식 규칙
- 제목은 메인 키워드로 시작
- 모든 문장은 10~20자 내외로 줄바꿈
- 한 문장 끝나면 빈 줄 추가
- 단락 번호는 1부터 시작 (번호 후 빈 줄)

### 스타일 규칙
- 친근한 말투 사용
- 블로거의 경험담 형식
- ~답니다 사용 금지
- 물음표, 느낌표 적절히 사용

### 중복 방지 규칙
- 이전 원고와 동일한 표현 사용 금지
- 의미는 유지하되 표현만 변경
- 숫자와 고유명사는 그대로 유지

---

## 🔧 고급 기능

### 프롬프트 커스터마이징
`create-anthropic/src/app/new/lib/batch-prompts.js` 파일을 수정하여 프롬프트를 변경할 수 있습니다.

### 검토 기능 활성화
`page.js`의 주석 처리된 검토 코드를 활성화하면 생성 후 자동 검토를 수행합니다:

```javascript
// 추가 검토 (선택적)
const checkResult = await ai.models.generateContent({
  model: 'gemini-2.5-flash',
  config: {
    systemInstruction: CHECK_AND_CLEAN_PROMPT,
    temperature: 0.3,
  },
  contents: cleaned,
});
cleaned = checkResult.text?.trim() || cleaned;
```

---

## 🆚 기존 시스템과 비교

| 기능 | 기존 시스템 | 새 시스템 |
|------|------------|-----------|
| 원고 생성 방식 | 1개씩 생성 | 10개 일괄 생성 |
| 중복 검사 | 별도 서버 필요 | 자동 처리 |
| 복사/다운로드 | 수동 | 클립보드 복사 + 다운로드 |
| 추가 생성 | 처음부터 다시 | 이전 원고 기반 추가 |
| 특수문자 제거 | 수동 | 자동 |

---

## 💡 팁

### 효율적인 사용법
1. **첫 생성은 5~10개로**: 먼저 품질을 확인
2. **만족하면 계속 생성**: "계속 생성"으로 추가
3. **키워드 변경 시 새로 생성**: 다른 키워드는 "새로 생성" 사용

### 품질 향상 팁
- 키워드를 구체적으로 입력 (예: "갈비 창업" → "갈비 창업 브랜드")
- 생성 개수를 조절하여 토큰 효율 관리
- 필요시 `constants.js`에서 글자 수 조정

---

## 🐛 문제 해결

### 생성이 안 되는 경우
- `.env` 파일에 `GEMINI_API_KEY`가 설정되어 있는지 확인
- 네트워크 연결 확인
- 브라우저 콘솔에서 오류 메시지 확인

### 중복이 발견되는 경우
- "계속 생성" 버튼을 사용했는지 확인
- 원고 개수를 줄여서 생성 (5개씩)
- 프롬프트의 `previousLines` 제한을 조정 (현재 200개)

### 특수문자가 남아있는 경우
- `page.js`의 특수문자 제거 정규식 확인
- 필요시 추가 패턴 추가

---

## 📞 문의

문제가 발생하거나 개선 사항이 있으면 이슈를 등록해주세요.

